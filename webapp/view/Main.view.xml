<mvc:View controllerName="zuimrp.controller.Main"
    xmlns:mvc="sap.ui.core.mvc" 
    displayBlock="true"
    xmlns="sap.m"
    xmlns:uiL="sap.ui.layout"
    xmlns:uiT="sap.ui.table"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:sfb="sap.ui.comp.smartfilterbar"
    xmlns:core="sap.ui.core"
    height="100%">

    <VBox id="vbMRP" fitContainer="true">
        <sfb:SmartFilterBar id="sfbMRP" entitySet="ZVB_3DERP_MRPFILTER" search="onSearchMrpHdr" persistencyKey="3DERP_MRPKey" filterContainerWidth="14rem">
            <sfb:controlConfiguration>
                <sfb:ControlConfiguration id="filterPlant" key="PLANTCD" groupId="_BASIC" label="Plant" controlType="dropDownList" 
                    displayBehaviour="idAndDescription" mandatory="mandatory">
                </sfb:ControlConfiguration>
            </sfb:controlConfiguration>
            <sfb:controlConfiguration>
                <sfb:ControlConfiguration id="filterPurchGrp" key="PURCHGRP" groupId="_BASIC" label="Purchase Group" controlType="dropDownList" 
                    displayBehaviour="idAndDescription" mandatory="notMandatory">
                </sfb:ControlConfiguration>
            </sfb:controlConfiguration>
            <sfb:controlConfiguration>
                <sfb:ControlConfiguration id="filterIONo" key="IONO" groupId="_BASIC" label="IO Number" controlType="dropDownList" 
                    displayBehaviour="idAndDescription" mandatory="notMandatory">
                </sfb:ControlConfiguration>
            </sfb:controlConfiguration>
            <sfb:controlConfiguration>
                <sfb:ControlConfiguration id="filterMatType" key="MATTYPE" groupId="_BASIC" label="Material Type" controlType="dropDownList" 
                    displayBehaviour="idAndDescription" mandatory="notMandatory">
                </sfb:ControlConfiguration>
            </sfb:controlConfiguration>
            <sfb:controlConfiguration>
                <sfb:ControlConfiguration id="filterMatGrp" key="MATGRP" groupId="_BASIC" label="Material Group" controlType="dropDownList" 
                    displayBehaviour="idOnly" mandatory="notMandatory">
                </sfb:ControlConfiguration>
            </sfb:controlConfiguration>
            <sfb:controlConfiguration>
                <sfb:ControlConfiguration id="filterCustGrp" key="CUSTGRP" groupId="_BASIC" label="Customer Group" controlType="dropDownList" 
                    displayBehaviour="idOnly" mandatory="notMandatory">
                </sfb:ControlConfiguration>
            </sfb:controlConfiguration>
            <sfb:layoutData>
				<FlexItemData shrinkFactor="0"/>
			</sfb:layoutData>
        </sfb:SmartFilterBar>
        
        <!-- <fb:FilterBar id="filterBar" header="Header"
                            reset="onReset" search="onSearch" clear="onClear" cancel="onCancel" 
                            filtersDialogClosed = "onFiltersDialogClosed"
                            showRestoreButton="true" showClearButton="true">
            <fb:filterGroupItems>
                <fb:FilterGroupItem id="fgiPlant" groupName="__$INTERNAL$" name="A" label="Plant" partOfCurrentVariant="true" visibleInFilterBar="true">
                    <fb:control>
                        <MultiComboBox
                            id="cmbPlant"
                            showSecondaryValues= "true"
                            width="100%"
                            items="{
                                path: 'mrpPlant>/results',
                                sorter: { path: 'PlantCd' }
                            }">
                            <core:ListItem id="liPlant" key="{mrpPlant>Plant}" text="{mrpPlant>PlantCd}" additionalText="{mrpPlant>Description}"/>
                        </MultiComboBox>
                    </fb:control>
                </fb:FilterGroupItem>
                <fb:FilterGroupItem id="fgiPurchGrp" groupName="__$INTERNAL$" name="B" label="Purch. Group" partOfCurrentVariant="true" visibleInFilterBar="true">
                    <fb:control>
                        <ComboBox
                            id="cmbPurchGrp"
                            showSecondaryValues= "true"
                            items="{
                                path: 'mrpPurchGrp>/results',
                                sorter: { path: 'Ekgrp' }
                            }">
                            <core:ListItem id="liPurchGrp" key="{mrpPurchGrp>Ekgrp}" text="{mrpPurchGrp>Ekgrp}" additionalText = "{mrpPurchGrp>Eknam}"/>
                        </ComboBox>
                    </fb:control>
                </fb:FilterGroupItem>
                <fb:FilterGroupItem id="fgiIONo" groupName="__$INTERNAL$" name="C" label="IO No." partOfCurrentVariant="true" visibleInFilterBar="true">
                    <fb:control>
                        <ComboBox
                            id="cmbIO"
                            showSecondaryValues= "false"
                            items="{
                                path: 'mrpIO>/results',
                                sorter: { path: 'Iono' }
                            }">
                            <core:ListItem id="liIO" key="{mrpIO>Iono}" text="{mrpIO>Iono}" additionalText = "{mrpIO>Iono}"/>
                        </ComboBox>
                    </fb:control>
                </fb:FilterGroupItem>
                <fb:FilterGroupItem id="fgiMatType" groupName="__$INTERNAL$" name="D" label="Material Type" partOfCurrentVariant="true" visibleInFilterBar="true">
                    <fb:control>
                        <Input id="iptMatType" type="Text"/>
                    </fb:control>
                </fb:FilterGroupItem>
                <fb:FilterGroupItem id="fgiMatGrp" groupName="__$INTERNAL$" name="E" label="Material Group" partOfCurrentVariant="true" visibleInFilterBar="true">
                    <fb:control>
                        <Input id="iptMatGrp" type="Text"/>
                    </fb:control>
                </fb:FilterGroupItem>
                <fb:FilterGroupItem id="fgiCustGrp" groupName="__$INTERNAL$" name="F" label="Customer Group" partOfCurrentVariant="true" visibleInFilterBar="true">
                    <fb:control>
                        <Input id="iptCustGrp" type="Text"/>
                    </fb:control>
                </fb:FilterGroupItem>
                <fb:FilterGroupItem id="fgiFtyStyle" groupName="__$INTERNAL$" name="G" label="Factory Style" partOfCurrentVariant="true" visibleInFilterBar="true">
                    <fb:control>
                        <Input id="iptFtyStyle" type="Text"/>
                    </fb:control>
                </fb:FilterGroupItem>
            </fb:filterGroupItems>
        </fb:FilterBar> -->

        <uiT:Table id="mrpHdrTab"
            class="tablePadding"
            rows="{mrpHdr>/results}"
            visibleRowCountMode="Auto"
            showColumnVisibilityMenu="true"
            enableColumnFreeze="true"
            enableCellFilter="true"
            selectionMode="MultiToggle"
            cellClick="onCellClickMrpHr"
            sort="onSorted"
            rowSelectionChange="onRowSelectionChangeMrpHdr">
            <uiT:extension>
                <Toolbar>
                    <ToolbarSpacer/>
                    <Button id="btnReserveMrpHdr" 
                        text="Reserve"
                        press="onReserveMrpHdr"
                        visible="true"/>
                    <Button id="btnResetMrpHdr" 
                        text="Reset"
                        press="onResetMrpHdr"
                        visible="true"/>
                    <Button id="btnExecuteMrpHdr" 
                        text="Execute"
                        press="onExecuteMrpHdr" 
                        visible="true" />
                    <Button id="btnRefreshMrpHdr" 
                        icon="sap-icon://refresh"
                        press="onRefreshMrpHdr"
                        visible="true"/>
                </Toolbar>
            </uiT:extension>
            <uiT:layoutData>
                <FlexItemData growFactor="1" baseSize="0%"/>
            </uiT:layoutData>
        </uiT:Table>

        <uiT:Table id="mrpDtlTab"
            class="tablePadding"
            rows="{mrpDtl>/results}"
            visibleRowCountMode="Auto"
            showColumnVisibilityMenu="true"
            enableColumnFreeze="true"
            enableCellFilter="true"
            selectionMode="MultiToggle"
            cellClick="onCellClickMrpDtl"
            sort="onSorted"
            rowSelectionChange="onRowSelectionChangeMrpDtl">
            <uiT:extension>
                <Toolbar>
                    <ToolbarSpacer/>
                    <Button id="btnEditMrpDtl"
                        icon="sap-icon://edit"
                        press="onEditMrpDtl"
                        tooltip="Edit"
                        visible="true"/>
                    <Button id="btnSaveMrpDtl" 
                        icon="sap-icon://save"
                        press="onSaveMrpDtl" 
                        visible="false" />
                    <Button id="btnCancelMrpDtl" 
                        icon="sap-icon://sys-cancel"
                        press="onCancelMrpDtl" 
                        visible="false" />                                        
                    <Button id="btnRefreshMrpDtl" 
                        icon="sap-icon://refresh"
                        press="onRefreshMrpDtl"
                        visible="true"/> 
                </Toolbar>
            </uiT:extension>
            <uiT:layoutData>
                <FlexItemData growFactor="1" baseSize="0%"/>
            </uiT:layoutData>
        </uiT:Table>

    </VBox>
</mvc:View>
